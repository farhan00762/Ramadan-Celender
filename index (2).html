<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
  <title>Ramadan 1447 ¬∑ Live Tracker</title>
  <!-- Modern English Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Outfit', sans-serif;
      background: #0a1310;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 10px 8px;
      color: #fff7e6;
      position: relative;
      overflow-x: hidden;
    }

    /* ---------- CINEMATIC CRESCENT & STARS BACKGROUND ---------- */
    .cosmic-sky {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(ellipse at 40% 40%, #172e1d, #030b07);
      z-index: 0;
      overflow: hidden;
    }

    /* Star field with multiple layers */
    .star-layer {
      position: absolute;
      width: 100%;
      height: 100%;
      background: transparent;
      animation: twinkle 8s infinite alternate;
    }

    .star-layer::after {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      background-image: 
        radial-gradient(2px 2px at 15px 80px, #fffbe6, rgba(0,0,0,0)),
        radial-gradient(3px 3px at 72px 430px, #fbe9b1, rgba(0,0,0,0)),
        radial-gradient(4px 4px at 250px 150px, #fff2b5, rgba(0,0,0,0)),
        radial-gradient(2px 2px at 160px 620px, #ffeaa8, rgba(0,0,0,0)),
        radial-gradient(5px 5px at 90% 20%, #ffeca5, rgba(0,0,0,0)),
        radial-gradient(3px 3px at 10% 85%, #ffecaa, rgba(0,0,0,0)),
        radial-gradient(4px 4px at 40% 40%, #fbe39c, rgba(0,0,0,0)),
        radial-gradient(2px 2px at 70% 70%, #ffebb5, rgba(0,0,0,0)),
        radial-gradient(6px 6px at 85% 30%, #fed889, rgba(0,0,0,0)),
        radial-gradient(3px 3px at 22% 53%, #fff9cf, rgba(0,0,0,0)),
        radial-gradient(4px 4px at 45% 88%, #ffefb1, rgba(0,0,0,0)),
        radial-gradient(2px 2px at 92% 45%, #fff2c0, rgba(0,0,0,0)),
        radial-gradient(5px 5px at 33% 17%, #fbe5a4, rgba(0,0,0,0));
      background-size: 550px 550px;
      background-repeat: repeat;
      opacity: 0.8;
    }

    .star-layer:nth-child(2) {
      transform: scale(1.2) rotate(10deg);
      animation: twinkle 12s infinite alternate;
      filter: blur(1px);
    }
    .star-layer:nth-child(3) {
      transform: scale(0.9) rotate(-5deg);
      animation: twinkle 6s infinite alternate-reverse;
    }

    @keyframes twinkle {
      0% { opacity: 0.5; transform: scale(1); }
      100% { opacity: 1; transform: scale(1.02); }
    }

    /* Masterful Crescent Moon with glow */
    .crescent-container {
      position: absolute;
      top: 5%;
      right: 5%;
      width: 180px;
      height: 180px;
      filter: drop-shadow(0 0 45px #fddea6);
      animation: lunarFloat 12s infinite ease-in-out;
      z-index: 3;
    }

    .crescent-moon {
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at 35% 35%, #fffde7, #fbeba8);
      border-radius: 50%;
      box-shadow: 0 0 80px #fddf9e, 0 0 150px #fbcb7b;
      position: relative;
    }

    .crescent-moon::before {
      content: '';
      position: absolute;
      top: -12px;
      left: 30px;
      width: 100%;
      height: 100%;
      background: #152f1d;
      border-radius: 50%;
      box-shadow: inset -5px -5px 25px #030d07;
    }

    .moon-glow {
      position: absolute;
      top: 20%;
      left: 15%;
      width: 70%;
      height: 70%;
      background: radial-gradient(circle, #fffbe0 0%, transparent 70%);
      border-radius: 50%;
      filter: blur(30px);
      opacity: 0.5;
    }

    @keyframes lunarFloat {
      0% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-18px) rotate(3deg); }
      100% { transform: translateY(0) rotate(0deg); }
    }

    /* Shooting stars */
    .shooting-star {
      position: absolute;
      top: 20%;
      left: -10%;
      width: 120px;
      height: 2px;
      background: linear-gradient(90deg, rgba(255,255,240,0.8), rgba(255,255,200,0));
      border-radius: 100%;
      transform: rotate(20deg);
      filter: blur(2px);
      animation: shoot 6s infinite ease-out;
      opacity: 0;
    }

    .shooting-star:nth-child(5) { top: 50%; animation-delay: 2s; width: 150px; }
    .shooting-star:nth-child(6) { top: 70%; animation-delay: 4s; width: 100px; }

    @keyframes shoot {
      0% { left: -10%; opacity: 1; }
      70% { opacity: 1; }
      100% { left: 110%; opacity: 0; }
    }

    /* Dust / nebula */
    .nebula {
      position: absolute;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at 80% 30%, #c9aa6630 0%, transparent 40%),
                  radial-gradient(circle at 10% 90%, #b68d4430 0%, transparent 35%);
      animation: nebulaMove 24s infinite alternate;
    }

    @keyframes nebulaMove {
      0% { opacity: 0.3; transform: scale(1) translate(0,0); }
      100% { opacity: 0.7; transform: scale(1.2) translate(-30px, -20px); }
    }

    /* main card */
    .app-card {
      max-width: 500px;
      width: 100%;
      background: rgba(12, 34, 21, 0.65);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-radius: 68px 68px 48px 48px;
      border: 2px solid #eacf89;
      box-shadow: 0 35px 65px -20px black, 0 0 0 2px #fff3cd inset, 0 25px 35px #17331e;
      padding: 28px 18px 30px 18px;
      position: relative;
      z-index: 20;
    }

    /* page structure */
    .page { display: none; flex-direction: column; gap: 18px; }
    .page.active-page { display: flex; }

    /* WELCOME PAGE */
    .welcome-icon { font-size: 6rem; text-align: center; filter: drop-shadow(0 0 35px #ffe29f); }
    .welcome-title { text-align: center; font-size: 2.8rem; font-weight: 700; color: #ffefc6; }
    .welcome-sub { text-align: center; background: #33633a; padding: 12px 25px; border-radius: 60px; width: fit-content; margin: 0 auto; font-weight: 500; border: 1px solid #efcb7a; }
    .farhan-greeting { background: #295232d9; border-radius: 60px; padding: 24px; border: 1px solid #debc6f; box-shadow: 0 8px 0 #3f6226; text-align: center; }
    .farhan-greeting h3 { font-size: 2.2rem; color: #ffefbd; }
    .farhan-greeting p { font-size: 1.3rem; }
    .enter-button { background: #cb9e4a; border: none; color: #152813; font-size: 2rem; font-weight: 700; padding: 18px; border-radius: 80px; border-bottom: 6px solid #7f6432; width: 100%; cursor: pointer; transition: 0.1s; }
    .enter-button:active { transform: translateY(4px); border-bottom-width: 2px; }

    /* HOME PAGE */
    .live-info-panel {
      background: #254d30d9;
      border-radius: 70px;
      padding: 20px;
      border: 2px solid #edcf7e;
      box-shadow: 0 7px 0 #3f6229;
    }

    .date-time {
      background: #e4d3a1; color: #1a3d1a; padding: 12px 20px; border-radius: 60px; font-size: 1.3rem; font-weight: 600; text-align: center; border: 1px solid #be9d4e;
    }

    .fast-progress {
      display: flex; justify-content: space-around; margin-top: 15px;
    }
    .progress-item { background: #3a6f43; border-radius: 40px; padding: 10px 20px; min-width: 120px; text-align: center; border: 1px solid #f1cf7b; }
    .progress-label { color: #fff3cb; font-size: 1rem; }
    .progress-number { font-size: 3rem; font-weight: 800; color: #fff9cf; line-height: 1; }

    /* IFTAR PANEL */
    .iftar-live { background: #1f6a36; border-radius: 60px; padding: 20px; border: 2px solid #fad980; box-shadow: 0 6px 0 #36622b; }
    .iftar-header { display: flex; justify-content: space-between; color: #fff9da; font-size: 1.3rem; font-weight: 600; }
    .countdown-row { display: flex; justify-content: center; gap: 20px; margin: 12px 0; }
    .cd-block { background: #2e823e; border-radius: 30px; padding: 10px 20px; border: 1px solid #f7d37b; }
    .cd-number { font-size: 2.8rem; font-weight: 700; color: #fffadc; }
    .cd-label { color: #f3de98; font-size: 0.9rem; }

    .iftar-message {
      background: #a77b39; border-radius: 60px; padding: 22px; color: #fffae2; font-size: 1.5rem; font-weight: 600; text-align: center; border: 2px solid #ffe399;
    }
    .hidden { display: none !important; }

    /* Region selector */
    .region-bar { background: #37653a; border-radius: 60px; padding: 12px 16px; display: flex; align-items: center; gap: 10px; border: 1px solid #e8be6b; }
    .region-bar label { background: #608f4b; padding: 8px 20px; border-radius: 40px; color: #fff9d9; font-weight: 600; }
    #citySelect { flex: 1; background: #ecdbb6; border: 2px solid #cbab5a; border-radius: 40px; padding: 14px; font-size: 1.1rem; color: #1b401b; font-weight: 500; appearance: none; background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="%236b4f24" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>'); background-repeat: no-repeat; background-position: right 14px center; }

    /* Ramadan counter (was "fasts") */
    .ramadan-summary {
      display: flex; justify-content: space-between; background: #2d5c35; border-radius: 50px; padding: 12px 20px; border: 1px solid #deba6b;
    }
    .summary-item { text-align: center; }
    .summary-number { font-size: 2rem; font-weight: 700; color: #fffec7; }
    .summary-label { color: #f9e5a5; }

    /* Table */
    .table-section { background: #23492ed9; border-radius: 40px; padding: 8px 6px; border: 1px solid #e1be6d; overflow-x: auto; }
    table { width: 100%; border-collapse: collapse; min-width: 380px; }
    th { background: #618f4f; color: #fffce3; padding: 14px 5px; border-bottom: 3px solid #f0c46a; }
    td { padding: 10px 5px; text-align: center; color: #faf1cf; border-bottom: 1px solid #9ab077; }
    .first-last-row { background: #509651 !important; font-weight: 600; }

    /* Eid Mubarak message (premium) */
    .eid-greeting {
      background: linear-gradient(145deg, #b28b41, #7f6430);
      border-radius: 60px;
      padding: 24px;
      font-size: 2rem;
      font-weight: 700;
      color: #fffacf;
      text-align: center;
      border: 3px solid #feda7a;
      box-shadow: 0 0 50px #fecd70;
      margin-bottom: 12px;
      text-shadow: 0 2px 10px #9a761f;
      animation: eidPulse 2s infinite;
    }

    @keyframes eidPulse {
      0% { box-shadow: 0 0 30px #fdcc7a; }
      50% { box-shadow: 0 0 70px #ffd98c; }
      100% { box-shadow: 0 0 30px #fdcc7a; }
    }

    .footer-note { text-align: center; color: #ead9a8; border-top: 1px dashed #bc984b; padding-top: 15px; }

    /* bottom navigation */
    .bottom-nav { display: flex; justify-content: space-around; background: #41703f; border-radius: 80px; padding: 10px; border: 1px solid #dfbe70; }
    .nav-btn { background: transparent; border: none; color: #fff2c4; font-size: 1.1rem; display: flex; flex-direction: column; align-items: center; padding: 8px 15px; border-radius: 40px; }
    .nav-btn.active { background: #719f4e; color: #fffecf; }
  </style>
</head>
<body>
  <!-- Cinematic premium sky with real crescent & stars -->
  <div class="cosmic-sky">
    <div class="star-layer"></div>
    <div class="star-layer"></div>
    <div class="star-layer"></div>
    <div class="crescent-container">
      <div class="crescent-moon"></div>
      <div class="moon-glow"></div>
    </div>
    <div class="shooting-star"></div>
    <div class="shooting-star"></div>
    <div class="nebula"></div>
  </div>

  <div class="app-card">
    <!-- PAGE 1 : WELCOME -->
    <div id="welcomePage" class="page active-page">
      <div class="welcome-icon">üåô‚ú®</div>
      <div class="welcome-title">Ramadan 1447</div>
      <div class="welcome-sub">Bangladesh ¬∑ 2026</div>
      <div class="farhan-greeting">
        <h3>From Farhan</h3>
        <p>üåÖ Assalamu Alaikum!<br>May your ibadah be accepted.<br>ü§≤ Pray on time, reap the blessings.</p>
      </div>
      <button class="enter-button" id="enterHomeBtn">üåô ENTER RAMADAN</button>
      <div style="text-align:center; margin-top:15px; color:#fff3b5;">30 blessed days ¬∑ 1st Ramadan: Feb 19</div>
    </div>

    <!-- PAGE 2 : HOME -->
    <div id="homePage" class="page">
      <!-- Live date/time & Ramadan counters (replaces "fasts") -->
      <div class="live-info-panel">
        <div class="date-time" id="currentDateTimeDisplay">Thu, Feb 19 2026 ¬∑ 4:30 PM</div>
        <div class="fast-progress">
          <div class="progress-item"><div class="progress-label">Ramadan completed</div><div class="progress-number" id="ramadanDoneCounter">0</div></div>
          <div class="progress-item"><div class="progress-label">Ramadan left</div><div class="progress-number" id="ramadanLeftCounter">30</div></div>
        </div>
      </div>

      <!-- IFTAR COUNTDOWN PANEL (visible before iftar) -->
      <div id="iftarCountdownPanel" class="iftar-live">
        <div class="iftar-header">
          <span>üåÖ Iftar</span>
          <span id="todayIftarTime">5:58 PM</span>
        </div>
        <div class="countdown-row" id="countdownRow">
          <div class="cd-block"><span class="cd-number" id="hoursLeft">02</span><div class="cd-label">hr</div></div>
          <div class="cd-block"><span class="cd-number" id="minutesLeft">15</span><div class="cd-label">min</div></div>
          <div class="cd-block"><span class="cd-number" id="secondsLeft">30</span><div class="cd-label">sec</div></div>
        </div>
        <div style="color:#fff9dd; text-align:center;">until iftar</div>
      </div>

      <!-- AFTER IFTAR MESSAGE (replaces countdown) + Ramadan count -->
      <div id="iftarPassedMessage" class="iftar-message hidden">
        üåü Iftar completed ¬∑ <span id="completedToday">1</span> Ramadan completed<br>Prepare for Isha & Taraweeh
      </div>

      <!-- Eid Mubarak message appears after 30 Ramadan completed (after iftar of 30th day) -->
      <div id="eidMessage" class="eid-greeting hidden">
        üéä Eid Mubarak! üéä<br>May your Ramadan be accepted. Eid tomorrow!
      </div>

      <!-- region selector -->
      <div class="region-bar">
        <label>üìç</label>
        <select id="citySelect">
          <option value="dhaka">Dhaka</option><option value="rangpur">Rangpur</option><option value="chattogram">Chattogram</option><option value="sylhet">Sylhet</option><option value="rajshahi">Rajshahi</option><option value="khulna">Khulna</option><option value="barishal">Barishal</option><option value="mymensingh">Mymensingh</option>
        </select>
      </div>

      <!-- Ramadan summary (was "fast-summary") -->
      <div class="ramadan-summary">
        <div class="summary-item"><span class="summary-number" id="completedRoza">0</span> <span class="summary-label">Ramadan completed</span></div>
        <div class="summary-item"><span class="summary-number" id="remainingRoza">30</span> <span class="summary-label">Ramadan left</span></div>
      </div>

      <!-- Calendar table -->
      <div class="table-section">
        <table id="ramadanTable">
          <thead><tr><th>Ramadan</th><th>Date</th><th>Day</th><th>Sehri ends</th><th>Iftar</th></tr></thead>
          <tbody id="tableBody"></tbody>
        </table>
      </div>

      <div class="footer-note">1st Ramadan: Feb 19 ¬∑ Last: Mar 20</div>

      <!-- bottom navigation -->
      <div class="bottom-nav">
        <button class="nav-btn active" id="homeNavBtn"><span>üè†</span> Home</button>
        <button class="nav-btn" id="welcomeNavBtn"><span>üåô</span> Welcome</button>
      </div>
    </div>
  </div>

  <script>
    (function() {
      // ---------- COMPLETE DATASETS ----------
      const calendars = {
        dhaka: [[1,"Feb 19","Thu","5:12 AM","5:58 PM"],[2,"Feb 20","Fri","5:11 AM","5:58 PM"],[3,"Feb 21","Sat","5:11 AM","5:59 PM"],[4,"Feb 22","Sun","5:10 AM","5:59 PM"],[5,"Feb 23","Mon","5:09 AM","6:00 PM"],[6,"Feb 24","Tue","5:08 AM","6:00 PM"],[7,"Feb 25","Wed","5:08 AM","6:01 PM"],[8,"Feb 26","Thu","5:07 AM","6:01 PM"],[9,"Feb 27","Fri","5:06 AM","6:02 PM"],[10,"Feb 28","Sat","5:05 AM","6:02 PM"],[11,"Mar 01","Sun","5:05 AM","6:03 PM"],[12,"Mar 02","Mon","5:04 AM","6:03 PM"],[13,"Mar 03","Tue","5:03 AM","6:04 PM"],[14,"Mar 04","Wed","5:02 AM","6:04 PM"],[15,"Mar 05","Thu","5:01 AM","6:05 PM"],[16,"Mar 06","Fri","5:00 AM","6:05 PM"],[17,"Mar 07","Sat","4:59 AM","6:06 PM"],[18,"Mar 08","Sun","4:58 AM","6:06 PM"],[19,"Mar 09","Mon","4:57 AM","6:07 PM"],[20,"Mar 10","Tue","4:57 AM","6:07 PM"],[21,"Mar 11","Wed","4:56 AM","6:07 PM"],[22,"Mar 12","Thu","4:55 AM","6:08 PM"],[23,"Mar 13","Fri","4:54 AM","6:08 PM"],[24,"Mar 14","Sat","4:53 AM","6:09 PM"],[25,"Mar 15","Sun","4:52 AM","6:09 PM"],[26,"Mar 16","Mon","4:51 AM","6:10 PM"],[27,"Mar 17","Tue","4:50 AM","6:10 PM"],[28,"Mar 18","Wed","4:49 AM","6:10 PM"],[29,"Mar 19","Thu","4:48 AM","6:11 PM"],[30,"Mar 20","Fri","4:47 AM","6:11 PM"]],
        rangpur: [[1,"Feb 19","Thu","5:18 AM","5:59 PM"],[2,"Feb 20","Fri","5:18 AM","5:59 PM"],[3,"Feb 21","Sat","5:17 AM","6:00 PM"],[4,"Feb 22","Sun","5:16 AM","6:01 PM"],[5,"Feb 23","Mon","5:15 AM","6:01 PM"],[6,"Feb 24","Tue","5:14 AM","6:02 PM"],[7,"Feb 25","Wed","5:14 AM","6:02 PM"],[8,"Feb 26","Thu","5:13 AM","6:03 PM"],[9,"Feb 27","Fri","5:12 AM","6:03 PM"],[10,"Feb 28","Sat","5:11 AM","6:04 PM"],[11,"Mar 01","Sun","5:10 AM","6:05 PM"],[12,"Mar 02","Mon","5:09 AM","6:05 PM"],[13,"Mar 03","Tue","5:08 AM","6:06 PM"],[14,"Mar 04","Wed","5:07 AM","6:06 PM"],[15,"Mar 05","Thu","5:06 AM","6:07 PM"],[16,"Mar 06","Fri","5:05 AM","6:07 PM"],[17,"Mar 07","Sat","5:05 AM","6:08 PM"],[18,"Mar 08","Sun","5:04 AM","6:08 PM"],[19,"Mar 09","Mon","5:03 AM","6:09 PM"],[20,"Mar 10","Tue","5:02 AM","6:09 PM"],[21,"Mar 11","Wed","5:01 AM","6:10 PM"],[22,"Mar 12","Thu","4:59 AM","6:10 PM"],[23,"Mar 13","Fri","4:58 AM","6:11 PM"],[24,"Mar 14","Sat","4:57 AM","6:11 PM"],[25,"Mar 15","Sun","4:56 AM","6:12 PM"],[26,"Mar 16","Mon","4:55 AM","6:12 PM"],[27,"Mar 17","Tue","4:54 AM","6:13 PM"],[28,"Mar 18","Wed","4:53 AM","6:13 PM"],[29,"Mar 19","Thu","4:52 AM","6:14 PM"],[30,"Mar 20","Fri","4:51 AM","6:15 PM"]],
        chattogram: [[1,"Feb 19","Thu","5:07 AM","5:52 PM"],[2,"Feb 20","Fri","5:06 AM","5:53 PM"],[3,"Feb 21","Sat","5:06 AM","5:53 PM"],[4,"Feb 22","Sun","5:05 AM","5:54 PM"],[5,"Feb 23","Mon","5:04 AM","5:54 PM"],[6,"Feb 24","Tue","5:03 AM","5:55 PM"],[7,"Feb 25","Wed","5:02 AM","5:55 PM"],[8,"Feb 26","Thu","5:02 AM","5:56 PM"],[9,"Feb 27","Fri","5:01 AM","5:56 PM"],[10,"Feb 28","Sat","5:00 AM","5:57 PM"],[11,"Mar 01","Sun","4:59 AM","5:57 PM"],[12,"Mar 02","Mon","4:58 AM","5:58 PM"],[13,"Mar 03","Tue","4:57 AM","5:58 PM"],[14,"Mar 04","Wed","4:56 AM","5:59 PM"],[15,"Mar 05","Thu","4:55 AM","5:59 PM"],[16,"Mar 06","Fri","4:54 AM","5:59 PM"],[17,"Mar 07","Sat","4:53 AM","6:00 PM"],[18,"Mar 08","Sun","4:52 AM","6:00 PM"],[19,"Mar 09","Mon","4:51 AM","6:01 PM"],[20,"Mar 10","Tue","4:50 AM","6:01 PM"],[21,"Mar 11","Wed","4:49 AM","6:01 PM"],[22,"Mar 12","Thu","4:48 AM","6:02 PM"],[23,"Mar 13","Fri","4:47 AM","6:02 PM"],[24,"Mar 14","Sat","4:46 AM","6:03 PM"],[25,"Mar 15","Sun","4:45 AM","6:03 PM"],[26,"Mar 16","Mon","4:44 AM","6:04 PM"],[27,"Mar 17","Tue","4:43 AM","6:04 PM"],[28,"Mar 18","Wed","4:42 AM","6:04 PM"],[29,"Mar 19","Thu","4:41 AM","6:05 PM"],[30,"Mar 20","Fri","4:40 AM","6:05 PM"]],
        sylhet: [[1,"Feb 19","Thu","5:02 AM","5:49 PM"],[2,"Feb 20","Fri","5:01 AM","5:50 PM"],[3,"Feb 21","Sat","5:01 AM","5:50 PM"],[4,"Feb 22","Sun","5:00 AM","5:51 PM"],[5,"Feb 23","Mon","4:59 AM","5:52 PM"],[6,"Feb 24","Tue","4:58 AM","5:52 PM"],[7,"Feb 25","Wed","4:57 AM","5:53 PM"],[8,"Feb 26","Thu","4:56 AM","5:53 PM"],[9,"Feb 27","Fri","4:55 AM","5:54 PM"],[10,"Feb 28","Sat","4:54 AM","5:54 PM"],[11,"Mar 01","Sun","4:53 AM","5:55 PM"],[12,"Mar 02","Mon","4:52 AM","5:55 PM"],[13,"Mar 03","Tue","4:51 AM","5:56 PM"],[14,"Mar 04","Wed","4:50 AM","5:56 PM"],[15,"Mar 05","Thu","4:49 AM","5:57 PM"],[16,"Mar 06","Fri","4:48 AM","5:57 PM"],[17,"Mar 07","Sat","4:47 AM","5:58 PM"],[18,"Mar 08","Sun","4:46 AM","5:58 PM"],[19,"Mar 09","Mon","4:45 AM","5:59 PM"],[20,"Mar 10","Tue","4:44 AM","5:59 PM"],[21,"Mar 11","Wed","4:43 AM","6:00 PM"],[22,"Mar 12","Thu","4:42 AM","6:00 PM"],[23,"Mar 13","Fri","4:41 AM","6:01 PM"],[24,"Mar 14","Sat","4:40 AM","6:01 PM"],[25,"Mar 15","Sun","4:39 AM","6:02 PM"],[26,"Mar 16","Mon","4:38 AM","6:02 PM"],[27,"Mar 17","Tue","4:36 AM","6:03 PM"],[28,"Mar 18","Wed","4:35 AM","6:03 PM"],[29,"Mar 19","Thu","4:34 AM","6:04 PM"],[30,"Mar 20","Fri","4:33 AM","6:04 PM"]],
        rajshahi: [[1,"Feb 19","Thu","5:17 AM","6:02 PM"],[2,"Feb 20","Fri","5:17 AM","6:03 PM"],[3,"Feb 21","Sat","5:16 AM","6:03 PM"],[4,"Feb 22","Sun","5:15 AM","6:04 PM"],[5,"Feb 23","Mon","5:14 AM","6:04 PM"],[6,"Feb 24","Tue","5:13 AM","6:05 PM"],[7,"Feb 25","Wed","5:13 AM","6:05 PM"],[8,"Feb 26","Thu","5:12 AM","6:06 PM"],[9,"Feb 27","Fri","5:11 AM","6:06 PM"],[10,"Feb 28","Sat","5:10 AM","6:07 PM"],[11,"Mar 01","Sun","5:09 AM","6:07 PM"],[12,"Mar 02","Mon","5:08 AM","6:08 PM"],[13,"Mar 03","Tue","5:07 AM","6:08 PM"],[14,"Mar 04","Wed","5:06 AM","6:09 PM"],[15,"Mar 05","Thu","5:05 AM","6:10 PM"],[16,"Mar 06","Fri","5:04 AM","6:10 PM"],[17,"Mar 07","Sat","5:03 AM","6:11 PM"],[18,"Mar 08","Sun","5:02 AM","6:11 PM"],[19,"Mar 09","Mon","5:01 AM","6:11 PM"],[20,"Mar 10","Tue","5:01 AM","6:12 PM"],[21,"Mar 11","Wed","5:00 AM","6:12 PM"],[22,"Mar 12","Thu","4:59 AM","6:13 PM"],[23,"Mar 13","Fri","4:58 AM","6:13 PM"],[24,"Mar 14","Sat","4:57 AM","6:14 PM"],[25,"Mar 15","Sun","4:56 AM","6:14 PM"],[26,"Mar 16","Mon","4:55 AM","6:15 PM"],[27,"Mar 17","Tue","4:54 AM","6:15 PM"],[28,"Mar 18","Wed","4:53 AM","6:16 PM"],[29,"Mar 19","Thu","4:52 AM","6:16 PM"],[30,"Mar 20","Fri","4:51 AM","6:17 PM"]],
        khulna: [[1,"Feb 19","Thu","5:16 AM","6:01 PM"],[2,"Feb 20","Fri","5:15 AM","6:01 PM"],[3,"Feb 21","Sat","5:15 AM","6:02 PM"],[4,"Feb 22","Sun","5:14 AM","6:02 PM"],[5,"Feb 23","Mon","5:13 AM","6:03 PM"],[6,"Feb 24","Tue","5:12 AM","6:03 PM"],[7,"Feb 25","Wed","5:12 AM","6:04 PM"],[8,"Feb 26","Thu","5:11 AM","6:04 PM"],[9,"Feb 27","Fri","5:10 AM","6:05 PM"],[10,"Feb 28","Sat","5:09 AM","6:05 PM"],[11,"Mar 01","Sun","5:08 AM","6:05 PM"],[12,"Mar 02","Mon","5:07 AM","6:06 PM"],[13,"Mar 03","Tue","5:06 AM","6:06 PM"],[14,"Mar 04","Wed","5:05 AM","6:07 PM"],[15,"Mar 05","Thu","5:04 AM","6:07 PM"],[16,"Mar 06","Fri","5:03 AM","6:07 PM"],[17,"Mar 07","Sat","5:02 AM","6:08 PM"],[18,"Mar 08","Sun","5:01 AM","6:08 PM"],[19,"Mar 09","Mon","5:00 AM","6:09 PM"],[20,"Mar 10","Tue","4:59 AM","6:09 PM"],[21,"Mar 11","Wed","4:58 AM","6:09 PM"],[22,"Mar 12","Thu","4:57 AM","6:10 PM"],[23,"Mar 13","Fri","4:56 AM","6:10 PM"],[24,"Mar 14","Sat","4:55 AM","6:10 PM"],[25,"Mar 15","Sun","4:54 AM","6:11 PM"],[26,"Mar 16","Mon","4:53 AM","6:11 PM"],[27,"Mar 17","Tue","4:52 AM","6:12 PM"],[28,"Mar 18","Wed","4:51 AM","6:12 PM"],[29,"Mar 19","Thu","4:50 AM","6:12 PM"],[30,"Mar 20","Fri","4:49 AM","6:13 PM"]],
        barishal: [[1,"Feb 19","Thu","5:13 AM","5:58 PM"],[2,"Feb 20","Fri","5:12 AM","5:58 PM"],[3,"Feb 21","Sat","5:12 AM","5:59 PM"],[4,"Feb 22","Sun","5:11 AM","5:59 PM"],[5,"Feb 23","Mon","5:10 AM","6:00 PM"],[6,"Feb 24","Tue","5:09 AM","6:00 PM"],[7,"Feb 25","Wed","5:09 AM","6:01 PM"],[8,"Feb 26","Thu","5:08 AM","6:01 PM"],[9,"Feb 27","Fri","5:07 AM","6:02 PM"],[10,"Feb 28","Sat","5:06 AM","6:02 PM"],[11,"Mar 01","Sun","5:05 AM","6:03 PM"],[12,"Mar 02","Mon","5:04 AM","6:03 PM"],[13,"Mar 03","Tue","5:03 AM","6:04 PM"],[14,"Mar 04","Wed","5:02 AM","6:04 PM"],[15,"Mar 05","Thu","5:01 AM","6:04 PM"],[16,"Mar 06","Fri","5:00 AM","6:05 PM"],[17,"Mar 07","Sat","4:59 AM","6:05 PM"],[18,"Mar 08","Sun","4:58 AM","6:06 PM"],[19,"Mar 09","Mon","4:57 AM","6:06 PM"],[20,"Mar 10","Tue","4:56 AM","6:06 PM"],[21,"Mar 11","Wed","4:55 AM","6:07 PM"],[22,"Mar 12","Thu","4:54 AM","6:07 PM"],[23,"Mar 13","Fri","4:53 AM","6:08 PM"],[24,"Mar 14","Sat","4:52 AM","6:08 PM"],[25,"Mar 15","Sun","4:51 AM","6:08 PM"],[26,"Mar 16","Mon","4:50 AM","6:09 PM"],[27,"Mar 17","Tue","4:49 AM","6:09 PM"],[28,"Mar 18","Wed","4:48 AM","6:09 PM"],[29,"Mar 19","Thu","4:47 AM","6:10 PM"],[30,"Mar 20","Fri","4:46 AM","6:10 PM"]],
        mymensingh: [[1,"Feb 19","Thu","5:11 AM","5:55 PM"],[2,"Feb 20","Fri","5:10 AM","5:56 PM"],[3,"Feb 21","Sat","5:10 AM","5:56 PM"],[4,"Feb 22","Sun","5:09 AM","5:57 PM"],[5,"Feb 23","Mon","5:08 AM","5:57 PM"],[6,"Feb 24","Tue","5:07 AM","5:58 PM"],[7,"Feb 25","Wed","5:07 AM","5:58 PM"],[8,"Feb 26","Thu","5:06 AM","5:59 PM"],[9,"Feb 27","Fri","5:05 AM","5:59 PM"],[10,"Feb 28","Sat","5:04 AM","6:00 PM"],[11,"Mar 01","Sun","5:03 AM","6:00 PM"],[12,"Mar 02","Mon","5:02 AM","6:01 PM"],[13,"Mar 03","Tue","5:01 AM","6:01 PM"],[14,"Mar 04","Wed","5:00 AM","6:02 PM"],[15,"Mar 05","Thu","4:59 AM","6:02 PM"],[16,"Mar 06","Fri","4:58 AM","6:03 PM"],[17,"Mar 07","Sat","4:57 AM","6:03 PM"],[18,"Mar 08","Sun","4:56 AM","6:04 PM"],[19,"Mar 09","Mon","4:55 AM","6:04 PM"],[20,"Mar 10","Tue","4:54 AM","6:05 PM"],[21,"Mar 11","Wed","4:53 AM","6:05 PM"],[22,"Mar 12","Thu","4:52 AM","6:06 PM"],[23,"Mar 13","Fri","4:51 AM","6:06 PM"],[24,"Mar 14","Sat","4:50 AM","6:07 PM"],[25,"Mar 15","Sun","4:49 AM","6:07 PM"],[26,"Mar 16","Mon","4:48 AM","6:08 PM"],[27,"Mar 17","Tue","4:47 AM","6:08 PM"],[28,"Mar 18","Wed","4:46 AM","6:09 PM"],[29,"Mar 19","Thu","4:45 AM","6:09 PM"],[30,"Mar 20","Fri","4:44 AM","6:10 PM"]]
      };

      // ---------- GLOBAL VARIABLES ----------
      let currentCity = 'dhaka';
      let currentRamadanCount = 0;         // 0 before iftar, increments after iftar each day
      const totalRamadan = 30;

      // DOM elements
      const welcomePage = document.getElementById('welcomePage');
      const homePage = document.getElementById('homePage');
      const enterBtn = document.getElementById('enterHomeBtn');
      const homeNav = document.getElementById('homeNavBtn');
      const welcomeNav = document.getElementById('welcomeNavBtn');

      const tbody = document.getElementById('tableBody');
      const citySelect = document.getElementById('citySelect');
      const iftarTimeSpan = document.getElementById('todayIftarTime');
      const hoursSpan = document.getElementById('hoursLeft');
      const minsSpan = document.getElementById('minutesLeft');
      const secsSpan = document.getElementById('secondsLeft');
      const iftarPanel = document.getElementById('iftarCountdownPanel');
      const iftarPassedDiv = document.getElementById('iftarPassedMessage');
      const eidDiv = document.getElementById('eidMessage');
      const currentDateTimeSpan = document.getElementById('currentDateTimeDisplay');
      const ramadanDoneCounter = document.getElementById('ramadanDoneCounter');
      const ramadanLeftCounter = document.getElementById('ramadanLeftCounter');
      const completedRozaSpan = document.getElementById('completedRoza');
      const remainingRozaSpan = document.getElementById('remainingRoza');
      const completedTodaySpan = document.getElementById('completedToday');

      // iftar target
      let iftarHour = 17, iftarMin = 58;

      function parseIftar(timeStr) {
        const match = timeStr.match(/(\d+):(\d+)\s*(AM|PM)/i);
        if (!match) return;
        let h = parseInt(match[1],10);
        const m = parseInt(match[2],10);
        const ap = match[3].toUpperCase();
        if (ap === 'PM' && h !== 12) h += 12;
        if (ap === 'AM' && h === 12) h = 0;
        iftarHour = h; iftarMin = m;
      }

      // Render table for selected city
      function renderCalendar(city) {
        const data = calendars[city];
        let html = '';
        data.forEach(row => { html += `<tr><td>${row[0]}</td><td>${row[1]}</td><td>${row[2]}</td><td>${row[3]}</td><td>${row[4]}</td></tr>`; });
        tbody.innerHTML = html;
        const rows = tbody.querySelectorAll('tr');
        if(rows.length) rows[0]?.classList.add('first-last-row');
        if(rows.length > 29) rows[29]?.classList.add('first-last-row');
        // set iftar time from day1
        const first = data[0];
        if (first) {
          iftarTimeSpan.innerText = first[4];
          parseIftar(first[4]);
        }
      }

      // update UI based on current time and ramadanCount
      function refreshUI() {
        const now = new Date();
        const formatted = now.toLocaleString('en-US', { weekday: 'short', month: 'short', day: 'numeric', year: 'numeric', hour: 'numeric', minute: '2-digit', hour12: true });
        currentDateTimeSpan.innerText = formatted;

        // determine if iftar passed
        const target = new Date(now);
        target.setHours(iftarHour, iftarMin, 0, 0);
        const diff = target - now;
        const iftarPassed = diff <= 0;

        // Calculate current Ramadan day from start date (Feb 19)
        const start = new Date(2026, 1, 19); // Feb 19 2026
        const todayDate = new Date(now.getFullYear(), now.getMonth(), now.getDate());
        const dayDiff = Math.floor((todayDate - start) / (86400000)) + 1;
        let ramadanDay = Math.min(Math.max(dayDiff, 1), 30);

        if (iftarPassed) {
          // after iftar, ramadan completed = ramadanDay (today's ramadan completed)
          currentRamadanCount = ramadanDay;
        } else {
          // before iftar, ramadan completed = ramadanDay - 1
          currentRamadanCount = Math.max(ramadanDay - 1, 0);
        }

        // check for eid (after 30 ramadan, i.e., ramadanDay = 30 and iftar passed)
        const eidReached = (currentRamadanCount >= 30);

        // update counters with "Ramadan" text
        ramadanDoneCounter.innerText = currentRamadanCount;
        ramadanLeftCounter.innerText = totalRamadan - currentRamadanCount;
        completedRozaSpan.innerText = currentRamadanCount;
        remainingRozaSpan.innerText = totalRamadan - currentRamadanCount;
        completedTodaySpan.innerText = currentRamadanCount; // inside iftar message

        // show/hide panels
        if (eidReached) {
          iftarPanel.classList.add('hidden');
          iftarPassedDiv.classList.add('hidden');
          eidDiv.classList.remove('hidden');
        } else {
          eidDiv.classList.add('hidden');
          if (iftarPassed) {
            iftarPanel.classList.add('hidden');
            iftarPassedDiv.classList.remove('hidden');
          } else {
            iftarPanel.classList.remove('hidden');
            iftarPassedDiv.classList.add('hidden');
            // update countdown
            const totalSec = Math.floor(diff / 1000);
            const hrs = Math.floor(totalSec / 3600);
            const mins = Math.floor((totalSec % 3600) / 60);
            const secs = totalSec % 60;
            hoursSpan.innerText = hrs.toString().padStart(2,'0');
            minsSpan.innerText = mins.toString().padStart(2,'0');
            secsSpan.innerText = secs.toString().padStart(2,'0');
          }
        }
      }

      // page switching
      function showPage(pageId) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active-page'));
        if (pageId === 'welcome') welcomePage.classList.add('active-page');
        else homePage.classList.add('active-page');
      }

      enterBtn.addEventListener('click', () => showPage('home'));
      homeNav.addEventListener('click', () => showPage('home'));
      welcomeNav.addEventListener('click', () => showPage('welcome'));

      // initial load
      renderCalendar('dhaka');
      setInterval(refreshUI, 1000);

      citySelect.addEventListener('change', (e) => {
        currentCity = e.target.value;
        renderCalendar(currentCity);
        refreshUI();
      });

      refreshUI();
    })();
  </script>
</body>
</html>